<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>text effects</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <section>
      <h1>Text Animations.</h1>
      <p>Scroll down for effects.</p>
    </section>

    <section>
      <p class="reveal-type" data-bg-color="#ccc" data-fg-color="teal">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Necessitatibus
        ullam illum consectetur error perferendis amet.
      </p>
    </section>
    <section>
      <p class="reveal-type" data-bg-color="#ccc" data-fg-color="black">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Nostrum
        voluptates odit animi architecto deserunt fuga maiores velit labore
        veritatis officiis.
      </p>
    </section>
    <section>
      <p class="reveal-type" data-bg-color="#353535" data-fg-color="red">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Ratione nam
        debitis doloribus nesciunt eum provident veritatis ab reprehenderit
        mollitia itaque amet, vero inventore a illum!
      </p>
    </section>

    <section></section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/split-type@0.3.4/umd/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.27/bundled/lenis.min.js"></script>

    <script>
      gsap.registerPlugin(ScrollTrigger);

      const splitTypes = document.querySelectorAll(".reveal-type");

      splitTypes.forEach((char, i) => {
        const text = new SplitType(char, { types: "chars," });
        const bg = char.dataset.bgColor;
        const fg = char.dataset.fgColor;
        // console.log(text);
        gsap.fromTo(
          text.chars,
          {
            //    scrollTrigger:{
            //     trigger: char,
            //     start: 'top 80%',
            //     end: 'top 20%',
            //     scrub: true,
            //    },
            // //    scaleY: 0,
            // //    y:-20,
            // //    tranformOrigin: 'top',
            //    opacity: 0.2,
            //    stagger: 0.1
            color: bg,
          },
          {
            color: fg,
            // duration:0.3,
            // stagger: 0.02,
            scrollTrigger: {
              trigger: char,
              start: "top 80%",
              end: "top 20%",
              scrub: true,
            },
            // opacity: 0.2,
            stagger: 0.1,
          }
        );
      });

      const lenis = new Lenis();

      lenis.on("scroll", (e) => {
        console.log(e);
      });

      function raf(time) {
        lenis.raf(time);
        requestAnimationFrame(raf);
      }

      requestAnimationFrame(raf);
    </script>
  </body>
</html>
